// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider  = "postgresql"
    url       = env("POSTGRES_PRISMA_URL") // uses connection pooling
    directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model Product {
    id          Int          @id @default(autoincrement())
    name        String
    description String
    price       Float
    stock       Int?
    icon        String
    collections Collection[]
    orders      Order[]
}

model Collection {
    name     String
    id       String    @id
    products Product[]
}

model Order {
    status        Int
    id            Int       @id @default(autoincrement())
    transation_id String    @unique
    user          User      @relation(fields: [userCPF], references: [CPF])
    userCPF       BigInt
    products      Product[]
}

model User {
    name     String
    CPF      BigInt   @unique
    location Location @relation(fields: [CPF], references: [userCPF])
    order    Order[]
}

// TODO: migrate this update
model Location {
    userCPF BigInt @unique
    sala    String
    fund    Int
    ano     Int
    User    User[]
}
